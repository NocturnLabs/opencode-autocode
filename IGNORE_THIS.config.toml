# OpenCode Autocode Configuration
# Generated by opencode-autocode --config

# ─────────────────────────────────────────────────────────────────────────────
# Models - AI models used for different tasks
# ─────────────────────────────────────────────────────────────────────────────
[models]
default = "opencode/grok-code"      # Spec generation
autonomous = "opencode/glm-4.7-free"   # Vibe loop coding
reasoning = "opencode/glm-4.7-free"    # Complex planning
enhancement = "opencode/glm-4.7-free"  # Enhancement discovery
fixer = "opencode/grok-code"        # Malformed XML repair

# ─────────────────────────────────────────────────────────────────────────────
# Autonomous Loop - Control vibe loop behavior
# ─────────────────────────────────────────────────────────────────────────────
[autonomous]
max_iterations = 0           # 0 = unlimited
delay_between_sessions = 5   # Seconds between iterations
session_timeout_minutes = 60  # 0 = no timeout
auto_commit = true              # Commit on feature completion
log_level = "DEBUG"

# ─────────────────────────────────────────────────────────────────────────────
# Agent Behavior - Fine-tune the AI agent
# ─────────────────────────────────────────────────────────────────────────────
[agent]
max_retry_attempts = 3       # Before research mode
max_research_attempts = 3    # Before giving up
verification_sample_size = 2 # Regression check sample
single_feature_focus = true     # One feature at a time

# ─────────────────────────────────────────────────────────────────────────────
# Stuck Recovery - Alternative approach generation
# ─────────────────────────────────────────────────────────────────────────────
[alternative_approaches]
enabled = true
retry_threshold = 3
num_approaches = 7
cache_results = true

# ─────────────────────────────────────────────────────────────────────────────
# MCP Tools - Model Context Protocol configuration
# ─────────────────────────────────────────────────────────────────────────────
[mcp]
prefer_osgrep = true            # Use semantic code search
use_sequential_thinking = true  # Complex reasoning MCP
required_tools = ["chrome-devtools"]         # Required MCP tools

# ─────────────────────────────────────────────────────────────────────────────
# Conductor - Context-driven planning
# ─────────────────────────────────────────────────────────────────────────────
[conductor]
context_dir = ".conductor"
tracks_dir = "tracks"
auto_setup = true
planning_mode = "auto"
checkpoint_frequency = 1

# ─────────────────────────────────────────────────────────────────────────────
# Spec Generation - Configure generated specs
# ─────────────────────────────────────────────────────────────────────────────
[generation]
complexity = "comprehensive"
include_security_section = true
include_testing_strategy = true
include_devops_section = true
include_accessibility = true
include_future_enhancements = true

# ─────────────────────────────────────────────────────────────────────────────
# Security - Allowlist configuration
# ─────────────────────────────────────────────────────────────────────────────
[security]
enforce_allowlist = true
allowlist_file = ".autocode/security-allowlist.json"

# ─────────────────────────────────────────────────────────────────────────────
# Paths - File locations
# ─────────────────────────────────────────────────────────────────────────────
[paths]
database_file = ".autocode/progress.db"
log_dir = "$HOME/.local/share/opencode/log"

# ─────────────────────────────────────────────────────────────────────────────
# Notifications - Webhook configuration
# ─────────────────────────────────────────────────────────────────────────────
[notifications]
webhook_enabled = true
webhook_url = "https://discord.com/api/webhooks/1457682640609218581/MI1XoXVTDkYqU1u-9eXzmBoeYbAYfSUn0ZGLjsOHwu6ROUlTvgJvqT-2NhkqEXhWk8qG"

# ─────────────────────────────────────────────────────────────────────────────
# UI - Display preferences
# ─────────────────────────────────────────────────────────────────────────────
[ui]
colored_output = true
verbose = true
show_progress = true
spec_preview_lines = 25

# ─────────────────────────────────────────────────────────────────────────────
# Communication - Agent-user communication channel
# ─────────────────────────────────────────────────────────────────────────────
[communication]
enabled = false
file_path = ".autocode/COMMUNICATION.md"
auto_ask_on_error = true
check_interval_sessions = 1
max_pending_questions = 5

# ─────────────────────────────────────────────────────────────────────────────
# Features - Feature tracking configuration
# ─────────────────────────────────────────────────────────────────────────────
[features]
require_verification_command = false
narrow_test_min_steps = 2
narrow_test_max_steps = 5
comprehensive_test_min_steps = 10

# ─────────────────────────────────────────────────────────────────────────────
# Scaffolding - Project creation settings
# ─────────────────────────────────────────────────────────────────────────────
[scaffolding]
git_init = true
output_dir = ""
create_opencode_dir = true
create_scripts_dir = true
