# autocode.toml - User Configuration for OpenCode Autonomous Plugin
#
# This file is generated by the scaffolding tool. Customize it to control
# how the autonomous coding agent behaves in your project.
#
# For all available options, see: https://github.com/NocturnLabs/opencode-autocode

# ─────────────────────────────────────────────────────────────────────────────
# MODELS - LLM models for different tasks
# ─────────────────────────────────────────────────────────────────────────────
[models]
# Model for spec generation (interactive mode)
# Leave empty to use OpenCode's default model
default = "opencode/big-pickle"

# Model for autonomous coding sessions
autonomous = "opencode/grok-code"

# ─────────────────────────────────────────────────────────────────────────────
# PATHS - File system paths
# ─────────────────────────────────────────────────────────────────────────────
[paths]
# Log directory for autonomous sessions
# Uses OpenCode's native log directory:
#   Linux/macOS: $HOME/.local/share/opencode/log
#   Windows: %APPDATA%\opencode\log
log_dir = "$HOME/.local/share/opencode/log"

# ─────────────────────────────────────────────────────────────────────────────
# AUTONOMOUS - Session control and iteration settings
# ─────────────────────────────────────────────────────────────────────────────
[autonomous]
# Seconds to wait between autonomous sessions
delay_between_sessions = 5

# Maximum iterations (0 = unlimited)
max_iterations = 0

# Auto-commit after each feature completion
auto_commit = true

# Session timeout in minutes (0 = no timeout)
session_timeout_minutes = 60

# ─────────────────────────────────────────────────────────────────────────────
# AGENT - Agent behavior and retry settings
# ─────────────────────────────────────────────────────────────────────────────
[agent]
# Maximum retry attempts before triggering research protocol
max_retry_attempts = 3

# Focus on one feature at a time (true) or allow multi-feature work (false)
single_feature_focus = true

# ─────────────────────────────────────────────────────────────────────────────
# MCP - Model Context Protocol tool preferences
# ─────────────────────────────────────────────────────────────────────────────
[mcp]
# Configure your available MCPs here (in priority order).
# Leave empty if you don't have custom MCPs - the agent will use standard tools.
#
# Recommended tools for the full NocturnLabs workflow:
#   osgrep              - Semantic code search    (https://github.com/Ryandonofrio3/osgrep)
#   perplexica          - Self-hosted AI search   (https://github.com/ItzCrazyKns/Perplexica)
#   deepwiki            - GitHub docs lookup      (https://deepwiki.com)
#   sequential-thinking - Structured reasoning    (https://github.com/modelcontextprotocol/servers)
#
# Example: priority_order = ["osgrep", "sequential-thinking"]
priority_order = []

# Prefer osgrep over grep for code search (set true if osgrep is installed)
prefer_osgrep = false

# ─────────────────────────────────────────────────────────────────────────────
# UI - User interface and output settings
# ─────────────────────────────────────────────────────────────────────────────
[ui]
# Show colored output
colored_output = true

# Verbose output during generation
verbose = false

# ─────────────────────────────────────────────────────────────────────────────
# ADVANCED SETTINGS (uncomment to customize)
# ─────────────────────────────────────────────────────────────────────────────

# [verbalized_sampling]
# enabled = true
# num_approaches = 10

# [security]
# enforce_allowlist = true
# allowlist_file = "scripts/security-allowlist.json"

# ─────────────────────────────────────────────────────────────────────────────
# CONDUCTOR - Context-driven planning settings
# ─────────────────────────────────────────────────────────────────────────────
[conductor]
# Directory for project context files (product, tech stack, workflow)
context_dir = ".conductor"

# Directory for track-based work units (per-feature specs and plans)
tracks_dir = "tracks"

# Auto-generate context files during first auto-init run
auto_setup = true

# Planning mode: "auto" (AI generates plan) or "manual" (user writes plan)
planning_mode = "auto"

# Checkpoint frequency: save progress after N completed tasks
checkpoint_frequency = 1
